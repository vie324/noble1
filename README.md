# エステサロン経営ダッシュボード

LuxeMetrics - 高級エステサロンの経営分析ダッシュボード

## 概要

このダッシュボードは、エステサロンの経営データを可視化し、売上分析・スタッフ管理・メニュー分析などを行うためのツールです。

## 主な機能

### 1. 店舗別表示機能
- **全店舗合計**: すべての店舗のデータを集計表示
- **新宿店**: 新宿店のみのデータを表示
- **新宿南口店**: 新宿南口店のみのデータを表示
- **スタッフ別**: スタッフごとの実績を表示

### 2. ダッシュボード (Executive Summary)
- 会計上売上（役務消化込み）
- キャッシュイン（入金総額）
- 回数券未消化残高
- 平均リピート率
- 売上構造分析グラフ
- 媒体別新規集客状況

### 3. 目標シミュレーション
- 月間目標売上設定
- 平均客単価・月間来客数のシミュレーション
- 目標達成に必要な単価・集客数の計算

### 4. 売上・媒体分析
- 媒体別パフォーマンス分析
- CPA（顧客獲得単価）分析
- リピート率分析
- キャッシュイン vs 役務消化の推移グラフ

### 5. メニュー別分析
対応メニュー:
- 剥離ありハーブピーリング(顔) - 両店舗対応
- 剥離なしハーブピーリング(顔) - 両店舗対応
- 剥離なしハーブピーリング(ボディ) - 両店舗対応
- よもぎ蒸し - **新宿南口店のみ**
- セルフホワイトニング - **新宿南口店のみ**

機能:
- メニュー別売上詳細テーブル
- メニュー別売上構成比グラフ
- 人気メニューランキング

### 6. スタッフ管理
- スタッフ情報の登録・編集
- 売上実績・目標管理
- 指名数・リピート率・満足度の追跡
- 店舗別スタッフフィルタリング

### 7. スプレッドシート連携（Google Apps Script）
- 日次売上データの自動保存
- メニュー別売上データの保存
- スタッフ実績データの保存
- データの一元管理

## セットアップ手順

### 1. ダッシュボードの使用

1. `index.html` をブラウザで開く
2. ダッシュボードが表示されます

### 2. Google Apps Script (GAS) の設定

#### スプレッドシートの作成

1. Google Driveで新しいスプレッドシートを作成
2. スプレッドシートのIDをコピー（URLの `d/` と `/edit` の間の文字列）

#### GASのデプロイ

1. スプレッドシートで「拡張機能」→「Apps Script」を開く
2. `gas/Code.gs` の内容をコピーして貼り付け
3. `SPREADSHEET_ID` を実際のスプレッドシートIDに変更:
   ```javascript
   const SPREADSHEET_ID = 'あなたのスプレッドシートID';
   ```
4. 「デプロイ」→「新しいデプロイ」を選択
5. 「種類の選択」で「ウェブアプリ」を選択
6. 次のように設定:
   - 説明: エステサロンダッシュボードAPI
   - 次のユーザーとして実行: 自分
   - アクセスできるユーザー: 全員
7. 「デプロイ」をクリック
8. デプロイされたウェブアプリのURLをコピー

#### index.htmlの設定

1. `index.html` を開く
2. 以下の行を見つけて、デプロイしたURLに変更:
   ```javascript
   const GAS_WEB_APP_URL = 'YOUR_GAS_WEB_APP_URL_HERE';
   ```
3. 実際のURLに置き換え:
   ```javascript
   const GAS_WEB_APP_URL = 'https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec';
   ```

#### スプレッドシートの初期化

1. GASエディタで `setupSpreadsheet()` 関数を実行
2. 権限の承認を求められたら承認
3. スプレッドシートに以下のシートが自動作成されます:
   - 日次売上
   - メニュー別売上
   - スタッフ実績
   - 媒体別データ

### 3. データの保存

1. ダッシュボードのヘッダーにある「スプレッドシートに保存」ボタンをクリック
2. データが自動的にスプレッドシートに保存されます
3. スプレッドシートで保存されたデータを確認できます

## 技術スタック

- **フロントエンド**: React 18 (CDN)
- **スタイリング**: Tailwind CSS
- **グラフライブラリ**: Recharts
- **アイコン**: Lucide Icons
- **バックエンド**: Google Apps Script
- **データストレージ**: Google Spreadsheets

## ファイル構成

```
noble1/
├── index.html          # メインダッシュボードHTML
├── gas/
│   └── Code.gs        # Google Apps Scriptコード
└── README.md          # このファイル
```

## カスタマイズ

### 店舗の追加・変更

`index.html` の以下の部分を編集:

```javascript
const stores = [
    { id: 1, name: "新宿店", code: "shinjuku" },
    { id: 2, name: "新宿南口店", code: "shinjuku_south" }
];
```

### メニューの追加・変更

```javascript
const menus = [
    { id: 1, name: "メニュー名", price: 価格, availableStores: [対応店舗ID配列] }
];
```

### スタッフの追加

ダッシュボードの「スタッフ管理」タブから「スタッフ新規登録」ボタンをクリックして追加できます。

## 注意事項

1. **no-corsモード**: GASの制限により、保存時のレスポンスは確認できません。スプレッドシートで直接確認してください。
2. **データの永続化**: ブラウザをリロードするとモックデータが再生成されます。重要なデータは必ずスプレッドシートに保存してください。
3. **セキュリティ**: GASのデプロイ設定で「アクセスできるユーザー」を適切に設定してください。

## サポート

問題が発生した場合は、以下を確認してください:

1. GASのデプロイURLが正しく設定されているか
2. スプレッドシートIDが正しいか
3. GASの実行権限が承認されているか
4. ブラウザのコンソールにエラーメッセージがないか

## ライセンス

このプロジェクトは内部使用のために作成されています。
